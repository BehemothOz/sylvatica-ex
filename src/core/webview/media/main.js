(()=>{class e extends HTMLElement{connectedCallback(){let e=this.attachShadow({mode:"open"}),t=document.getElementById("spinner-template");e.append(t.content.cloneNode(!0))}}class t extends HTMLElement{connectedCallback(){let e=this.attachShadow({mode:"open"}),t=document.getElementById("icon-wrapper-template");e.append(t.content.cloneNode(!0))}}class n extends HTMLElement{connectedCallback(){let e=this.attachShadow({mode:"open"}),t=document.getElementById("badge-template");e.append(t.content.cloneNode(!0))}}function a(e,t){let n=document.createElement("button"),a=document.createElement("sy-icon");return n.classList.add("button-icon",e),a.append(t),n.append(a),n}customElements.define("sy-spinner",e),customElements.define("sy-icon",t),customElements.define("sy-badge",n);let l=function(){let e=document.getElementById("icon-update-template"),t=document.getElementById("icon-basket-template");return{update:()=>a("primary",e.content.cloneNode(!0)),remove:()=>a("danger",t.content.cloneNode(!0))}}();function c(e){if(null==e)return"gray";if(e.startsWith("pre"))return"blue";switch(e){case"major":return"red";case"minor":return"orange";case"patch":return"green";default:return"gray"}}let d=[{title:"Package",key:"name",render:e=>{let t=document.createElement("div");t.classList.add("package-name");let n=document.createElement("sy-badge"),a=document.createElement("span");return n.setAttribute("color",c(e.diff)),a.textContent=e.name,t.append(n,a),t}},{title:"Semver diff",key:"diff",render:e=>{let t=document.createElement("span");return t.classList.add("semver-diff",`${c(e.diff)}`),t.textContent=e.diff??"identical",t}},{title:"Range",key:"range"},{title:"Current Version",key:"version"},{title:"Latest Version",key:"latestVersion"},{title:"Homepage",key:"homepage",render:e=>{try{let t=new URL(e.homepage),n=document.createElement("a");return n.classList.add("link"),n.setAttribute("href",e.homepage),n.setAttribute("title",e.homepage),n.textContent=t.hostname,n}catch{return""}}}];function o(e){return e.isVisibleButtons?d.concat({title:"",key:null,render:()=>{let e=document.createElement("div");return e.append(l.update(),l.remove()),e}}):d}function r({title:e,columns:t,dataTable:n}){let a=function(e){let t=document.createElement("section"),n=function(e){let t=document.createElement("h2");return t.textContent=e,t}(e);return t.classList.add("table-section"),t.append(n),t}(e),l=function(){let e=document.createElement("div");return e.classList.add("table-wrapper"),e}(),c=document.createElement("table"),d=function(e){let t=document.createElement("thead"),n=document.createElement("tr");for(let t of e){let e=document.createElement("th");e.textContent=t.title,n.append(e)}return t.append(n),t}(t),o=function(e,t){let n=document.createElement("tbody");for(let a of t)if("damage"in a){let t=function(e,t){let n=document.createElement("tr"),a=document.createElement("td"),l=document.createElement("td");return[a,l].forEach(e=>e.classList.add("damage")),a.setAttribute("data-label",e[0].title),l.setAttribute("colspan",`${e.length-1}`),a.textContent=t.name,l.textContent=t.error,n.append(a,l),n}(e,a);n.append(t)}else{let t=function(e,t){let n=document.createElement("tr");for(let a of e)n.append(function(e,t){let n=document.createElement("td");if(n.setAttribute("data-label",e.title),e.className&&n.classList.add(e.className),e.render){let a=e.render(t);n.append(a)}else if(e.key){let a=t[e.key];n.textContent=a}else n.textContent="";return n}(a,t));return n}(e,a);n.append(t)}return n}(t,n);return c.append(d,o),l.append(c),a.append(l),a}let s=document.getElementById("root"),i=function(){let e=document.getElementById("spin");return{show:()=>e.classList.remove("hide"),hide:()=>e.classList.add("hide")}}();window.addEventListener("message",e=>{let{type:t,payload:n}=e.data;switch(t){case"INITIALIZATION":console.log("INITIALIZATION"),s.innerHTML="",i.show();break;case"DEPENDENCIES":{let{title:e,packages:t}=n,a=o({isVisibleButtons:!1});i.hide(),s.append(r({title:e,columns:a,dataTable:t}));break}case"DEV_DEPENDENCIES":{let{title:e,packages:t}=n,a=o({isVisibleButtons:!1});i.hide(),s.append(r({title:e,columns:a,dataTable:t}));break}case"ERROR_DETECTED":{let e=function(e){let t=document.createElement("div"),n=document.createElement("span"),a=document.createTextNode(e),l=document.getElementById("icon-close-circle-template").content.cloneNode(!0);return t.classList.add("alert-message"),n.classList.add("icon"),n.append(l),t.append(n,a),t}(n);s.append(e);break}case"PACKAGE_MANAGER_DETECTED":console.log("PACKAGE_MANAGER_DETECTED")}})})();
//# sourceMappingURL=main.js.map
