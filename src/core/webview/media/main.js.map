{"mappings":"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","sources":["<anon>","src/main.ts","src/scripts/components.ts","src/scripts/columns.ts","src/scripts/buttons.ts","src/scripts/table.ts"],"sourcesContent":["(() => {\nclass $c5d68ffd5fcc9ca2$var$Spinner extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"spinner-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\nclass $c5d68ffd5fcc9ca2$var$Icon extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"icon-wrapper-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\nclass $c5d68ffd5fcc9ca2$var$Badge extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"badge-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\ncustomElements.define(\"sy-spinner\", $c5d68ffd5fcc9ca2$var$Spinner);\ncustomElements.define(\"sy-icon\", $c5d68ffd5fcc9ca2$var$Icon);\ncustomElements.define(\"sy-badge\", $c5d68ffd5fcc9ca2$var$Badge);\n\n\nfunction $7d054a12c1d6ba04$var$createButton(type, icon) {\n    const button = document.createElement(\"button\");\n    const iconWrapper = document.createElement(\"sy-icon\");\n    button.classList.add(\"button-icon\", type);\n    iconWrapper.append(icon);\n    button.append(iconWrapper);\n    return button;\n}\nfunction $7d054a12c1d6ba04$export$cf36c158a653a556() {\n    const updateIconTemplate = document.getElementById(\"icon-update-template\");\n    const basketIconTemplate = document.getElementById(\"icon-basket-template\");\n    return {\n        update: ()=>{\n            const icon = updateIconTemplate.content.cloneNode(true);\n            return $7d054a12c1d6ba04$var$createButton(\"primary\", icon);\n        },\n        remove: ()=>{\n            const icon = basketIconTemplate.content.cloneNode(true);\n            return $7d054a12c1d6ba04$var$createButton(\"danger\", icon);\n        }\n    };\n}\n\n\nconst $15a6648033506b14$var$buttons = (0, $7d054a12c1d6ba04$export$cf36c158a653a556)();\n/*\n    TODO: move\n*/ function $15a6648033506b14$var$selectBadgeColor(diff) {\n    if (diff == null) return \"gray\";\n    if (diff.startsWith(\"pre\")) return \"blue\";\n    switch(diff){\n        case \"major\":\n            return \"red\";\n        case \"minor\":\n            return \"orange\";\n        case \"patch\":\n            return \"green\";\n        default:\n            return \"gray\";\n    }\n}\nconst $15a6648033506b14$export$53b3c91859018cd4 = [\n    /**\n     * Package name (dependency name from package.json)\n     */ {\n        title: \"Package\",\n        key: \"name\",\n        render: (rowData)=>{\n            const fragment = document.createDocumentFragment();\n            const badge = document.createElement(\"sy-badge\");\n            const span = document.createElement(\"span\");\n            badge.setAttribute(\"color\", $15a6648033506b14$var$selectBadgeColor(rowData.diff));\n            span.textContent = rowData.name;\n            fragment.append(badge, span);\n            return fragment;\n        }\n    },\n    {\n        title: \"Semver diff\",\n        key: \"diff\"\n    },\n    /**\n     * Versions range allowed for installation (from package.json)\n     */ {\n        title: \"Range\",\n        key: \"range\",\n        className: \"range\"\n    },\n    {\n        title: \"Current Version\",\n        key: \"version\"\n    },\n    {\n        title: \"Last Version\",\n        key: \"lastVersion\"\n    },\n    /**\n     * Link to the package's home page\n     */ {\n        title: \"Homepage\",\n        key: \"homepage\"\n    },\n    {\n        title: \"\",\n        key: \"actions\",\n        render: (rowData)=>{\n            const wrapper = document.createElement(\"div\");\n            wrapper.append($15a6648033506b14$var$buttons.update(), $15a6648033506b14$var$buttons.remove());\n            return wrapper;\n        }\n    }\n];\n\n\nfunction $33f836c69e88b0fe$var$createHeader(columns) {\n    const header = document.createElement(\"tr\");\n    for (const column of columns){\n        const headerCell = document.createElement(\"th\");\n        headerCell.textContent = column.title;\n        header.append(headerCell);\n    }\n    return header;\n}\nfunction $33f836c69e88b0fe$var$createCaption(title) {\n    const caption = document.createElement(\"caption\");\n    caption.textContent = title;\n    return caption;\n}\nfunction $33f836c69e88b0fe$var$createRow(columns, rowData) {\n    const row = document.createElement(\"tr\");\n    for (const column of columns){\n        const cell = document.createElement(\"td\");\n        if (column.className) cell.classList.add(column.className);\n        if (column.render) {\n            const cellValue = column.render(rowData);\n            cell.append(cellValue);\n        } else {\n            const value = rowData[column.key];\n            cell.textContent = value;\n        }\n        row.append(cell);\n    }\n    return row;\n}\nfunction $33f836c69e88b0fe$var$createRows(columns, payload) {\n    const fragment = document.createDocumentFragment();\n    for (const rowData of payload){\n        const row = $33f836c69e88b0fe$var$createRow(columns, rowData);\n        fragment.append(row);\n    }\n    return fragment;\n}\nfunction $33f836c69e88b0fe$export$4e1d9a3b5c360fd3(columns, payload) {\n    const table = document.createElement(\"table\");\n    const caption = $33f836c69e88b0fe$var$createCaption(\"Caption\");\n    const header = $33f836c69e88b0fe$var$createHeader(columns);\n    const rows = $33f836c69e88b0fe$var$createRows(columns, payload);\n    table.append(caption, header, rows);\n    return table;\n}\n\n\n/*\n    https://uit.stanford.edu/accessibility/concepts/tables/css-aria\n    https://adrianroselli.com/2017/11/a-responsive-accessible-table.html\n\n    https://habr.com/ru/articles/546980/\n    https://learn.javascript.ru/webcomponents-intro\n*/ /*\n    # Mock for test\n    const data: Array<Package> = [\n        {\n            name: 'axios',\n            diff: 'major',\n            range: '^1.2.0',\n            version: '1.2.4',\n            lastVersion: '3.0.1',\n            homepage: 'https://www.google.com',\n        },\n    ];\n*/ const $8b92a9e94badc9da$var$root = document.getElementById(\"root\");\nwindow.addEventListener(\"message\", (event)=>{\n    const { type: type, payload: payload } = event.data;\n    switch(type){\n        case \"INITIALIZATION\":\n            console.log(\"INITIALIZATION\");\n            break;\n        case \"DEPENDENCIES\":\n            $8b92a9e94badc9da$var$root.append((0, $33f836c69e88b0fe$export$4e1d9a3b5c360fd3)((0, $15a6648033506b14$export$53b3c91859018cd4), event.data.data));\n            break;\n        case \"DEV_DEPENDENCIES\":\n            break;\n        case \"PACKAGE_MANAGER_DETECTED\":\n            console.log(\"PACKAGE_MANAGER_DETECTED\");\n            break;\n    }\n});\n\n})();\n//# sourceMappingURL=main.js.map\n","import './scripts/components';\n\nimport { columns } from './scripts/columns';\nimport { generateTable } from './scripts/table';\n\n/*\n    https://uit.stanford.edu/accessibility/concepts/tables/css-aria\n    https://adrianroselli.com/2017/11/a-responsive-accessible-table.html\n\n    https://habr.com/ru/articles/546980/\n    https://learn.javascript.ru/webcomponents-intro\n*/\n\n/*\n    # Mock for test\n    const data: Array<Package> = [\n        {\n            name: 'axios',\n            diff: 'major',\n            range: '^1.2.0',\n            version: '1.2.4',\n            lastVersion: '3.0.1',\n            homepage: 'https://www.google.com',\n        },\n    ];\n*/\n\nconst root = document.getElementById('root') as HTMLDivElement;\n\nwindow.addEventListener('message', (event) => {\n    const { type, payload } = event.data;\n\n    switch (type) {\n        case 'INITIALIZATION': {\n            console.log('INITIALIZATION');\n            break;\n        }\n        case 'DEPENDENCIES': {\n            root.append(generateTable(columns, event.data.data));\n            break;\n        }\n        case 'DEV_DEPENDENCIES': {\n            // ...\n            break;\n        }\n        case 'PACKAGE_MANAGER_DETECTED': {\n            console.log('PACKAGE_MANAGER_DETECTED');\n            break;\n        }\n    }\n});\n","class Spinner extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('spinner-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\nclass Icon extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('icon-wrapper-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\nclass Badge extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('badge-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\ncustomElements.define('sy-spinner', Spinner);\ncustomElements.define('sy-icon', Icon);\ncustomElements.define('sy-badge', Badge);\n","import { Column, ReleaseType } from './types';\nimport { createButtons } from './buttons';\n\nconst buttons = createButtons();\n\n/*\n    TODO: move\n*/\nfunction selectBadgeColor(diff: ReleaseType) {\n    if (diff == null) return 'gray';\n    if (diff.startsWith('pre')) return 'blue';\n\n    switch (diff) {\n        case 'major':\n            return 'red';\n        case 'minor':\n            return 'orange';\n        case 'patch':\n            return 'green';\n        default:\n            return 'gray';\n    }\n}\n\nexport const columns: Array<Column> = [\n    /**\n     * Package name (dependency name from package.json)\n     */\n    {\n        title: 'Package',\n        key: 'name',\n        render: (rowData) => {\n            const fragment = document.createDocumentFragment();\n\n            const badge = document.createElement('sy-badge');\n            const span = document.createElement('span');\n\n            badge.setAttribute('color', selectBadgeColor(rowData.diff));\n            span.textContent = rowData.name;\n\n            fragment.append(badge, span);\n\n            return fragment;\n        },\n    },\n    {\n        title: 'Semver diff',\n        key: 'diff',\n    },\n    /**\n     * Versions range allowed for installation (from package.json)\n     */\n    {\n        title: 'Range',\n        key: 'range',\n        className: 'range',\n    },\n    {\n        title: 'Current Version',\n        key: 'version',\n    },\n    {\n        title: 'Last Version',\n        key: 'lastVersion',\n    },\n    /**\n     * Link to the package's home page\n     */\n    {\n        title: 'Homepage',\n        key: 'homepage',\n    },\n    {\n        title: '',\n        key: 'actions',\n        render: (rowData) => {\n            const wrapper = document.createElement('div');\n            wrapper.append(buttons.update(), buttons.remove());\n\n            return wrapper;\n        },\n    },\n];\n","type ButtonType = 'primary' | 'danger';\n\nfunction createButton(type: ButtonType, icon: Node) {\n    const button = document.createElement('button');\n    const iconWrapper = document.createElement('sy-icon');\n\n    button.classList.add('button-icon', type);\n\n    iconWrapper.append(icon);\n    button.append(iconWrapper);\n\n    return button;\n}\n\nexport function createButtons() {\n    const updateIconTemplate = document.getElementById('icon-update-template') as HTMLTemplateElement;\n    const basketIconTemplate = document.getElementById('icon-basket-template') as HTMLTemplateElement;\n\n    return {\n        update: () => {\n            const icon = updateIconTemplate.content.cloneNode(true);\n            return createButton('primary', icon);\n        },\n        remove: () => {\n            const icon = basketIconTemplate.content.cloneNode(true);\n            return createButton('danger', icon);\n        },\n    };\n}\n","import { Column, Package } from './types';\n\nfunction createHeader(columns: Array<Column>) {\n    const header = document.createElement('tr');\n\n    for (const column of columns) {\n        const headerCell = document.createElement('th');\n        headerCell.textContent = column.title;\n\n        header.append(headerCell);\n    }\n\n    return header;\n}\n\nfunction createCaption(title: string) {\n    const caption = document.createElement('caption');\n    caption.textContent = title;\n\n    return caption;\n}\n\nfunction createRow(columns: Array<Column>, rowData: Package) {\n    const row = document.createElement('tr');\n\n    for (const column of columns) {\n        const cell = document.createElement('td');\n\n        if (column.className) {\n            cell.classList.add(column.className);\n        }\n\n        if (column.render) {\n            const cellValue = column.render(rowData);\n            cell.append(cellValue);\n        } else {\n            const value = rowData[column.key];\n            cell.textContent = value;\n        }\n\n        row.append(cell);\n    }\n\n    return row;\n}\n\nfunction createRows(columns: Array<Column>, payload: Array<Package>) {\n    const fragment = document.createDocumentFragment();\n\n    for (const rowData of payload) {\n        const row = createRow(columns, rowData);\n        fragment.append(row);\n    }\n\n    return fragment;\n}\n\nexport function generateTable(columns: Array<Column>, payload: Array<Package>) {\n    const table = document.createElement('table');\n\n    const caption = createCaption('Caption');\n    const header = createHeader(columns);\n    const rows = createRows(columns, payload);\n\n    table.append(caption, header, rows);\n\n    return table;\n}\n"],"names":["$c5d68ffd5fcc9ca2$var$Spinner","HTMLElement","connectedCallback","shadow","attachShadow","mode","template","document","getElementById","append","content","cloneNode","$c5d68ffd5fcc9ca2$var$Icon","$c5d68ffd5fcc9ca2$var$Badge","$7d054a12c1d6ba04$var$createButton","type","icon","button","createElement","iconWrapper","classList","add","customElements","define","$15a6648033506b14$var$buttons","updateIconTemplate","basketIconTemplate","update","remove","$15a6648033506b14$export$53b3c91859018cd4","title","key","render","rowData","fragment","createDocumentFragment","badge","span","setAttribute","$15a6648033506b14$var$selectBadgeColor","diff","startsWith","textContent","name","className","wrapper","$8b92a9e94badc9da$var$root","window","addEventListener","event","payload","data","console","log","columns","table","caption","$33f836c69e88b0fe$var$createCaption","header","$33f836c69e88b0fe$var$createHeader","column","headerCell","rows","$33f836c69e88b0fe$var$createRows","row","$33f836c69e88b0fe$var$createRow","cell","cellValue","value"],"version":3,"file":"main.js.map"}