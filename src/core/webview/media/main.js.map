{"mappings":"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","sources":["<anon>","src/main.ts","src/scripts/components.ts","src/scripts/columns.ts","src/scripts/buttons.ts","src/scripts/alert.ts","src/scripts/table/index.ts","src/scripts/table/table.ts","src/scripts/table/header.ts","src/scripts/table/row.ts","src/scripts/table/cell.ts"],"sourcesContent":["(() => {\nclass $c5d68ffd5fcc9ca2$var$Spinner extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"spinner-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\nclass $c5d68ffd5fcc9ca2$var$Icon extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"icon-wrapper-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\nclass $c5d68ffd5fcc9ca2$var$Badge extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({\n            mode: \"open\"\n        });\n        const template = document.getElementById(\"badge-template\");\n        shadow.append(template.content.cloneNode(true));\n    }\n}\ncustomElements.define(\"sy-spinner\", $c5d68ffd5fcc9ca2$var$Spinner);\ncustomElements.define(\"sy-icon\", $c5d68ffd5fcc9ca2$var$Icon);\ncustomElements.define(\"sy-badge\", $c5d68ffd5fcc9ca2$var$Badge);\n\n\nfunction $7d054a12c1d6ba04$var$createButton(type, icon) {\n    const button = document.createElement(\"button\");\n    const iconWrapper = document.createElement(\"sy-icon\");\n    button.classList.add(\"button-icon\", type);\n    iconWrapper.append(icon);\n    button.append(iconWrapper);\n    return button;\n}\nfunction $7d054a12c1d6ba04$export$cf36c158a653a556() {\n    const updateIconTemplate = document.getElementById(\"icon-update-template\");\n    const basketIconTemplate = document.getElementById(\"icon-basket-template\");\n    return {\n        update: ()=>{\n            const icon = updateIconTemplate.content.cloneNode(true);\n            return $7d054a12c1d6ba04$var$createButton(\"primary\", icon);\n        },\n        remove: ()=>{\n            const icon = basketIconTemplate.content.cloneNode(true);\n            return $7d054a12c1d6ba04$var$createButton(\"danger\", icon);\n        }\n    };\n}\n\n\nconst $15a6648033506b14$var$buttons = (0, $7d054a12c1d6ba04$export$cf36c158a653a556)();\n/*\n    TODO: move\n*/ function $15a6648033506b14$var$selectDifferenceColor(diff) {\n    if (diff == null) return \"gray\";\n    if (diff.startsWith(\"pre\")) return \"blue\";\n    switch(diff){\n        case \"major\":\n            return \"red\";\n        case \"minor\":\n            return \"orange\";\n        case \"patch\":\n            return \"green\";\n        default:\n            return \"gray\";\n    }\n}\nconst $15a6648033506b14$var$columns = [\n    /**\n     * Package name (dependency name from package.json)\n     */ {\n        title: \"Package\",\n        key: \"name\",\n        render: (rowData)=>{\n            const container = document.createElement(\"div\");\n            container.classList.add(\"package-name\");\n            const badge = document.createElement(\"sy-badge\");\n            const span = document.createElement(\"span\");\n            badge.setAttribute(\"color\", $15a6648033506b14$var$selectDifferenceColor(rowData.diff));\n            span.textContent = rowData.name;\n            container.append(badge, span);\n            return container;\n        }\n    },\n    {\n        title: \"Semver diff\",\n        key: \"diff\",\n        render: (rowData)=>{\n            const span = document.createElement(\"span\");\n            span.classList.add(\"semver-diff\", `${$15a6648033506b14$var$selectDifferenceColor(rowData.diff)}`);\n            span.textContent = rowData.diff ?? \"identical\";\n            return span;\n        }\n    },\n    {\n        title: \"Range\",\n        key: \"range\"\n    },\n    {\n        title: \"Current Version\",\n        key: \"version\"\n    },\n    {\n        title: \"Latest Version\",\n        key: \"latestVersion\"\n    },\n    /**\n     * Link to the package's home page\n     */ {\n        title: \"Homepage\",\n        key: \"homepage\",\n        render: (rowData)=>{\n            try {\n                const url = new URL(rowData.homepage);\n                const link = document.createElement(\"a\");\n                link.classList.add(\"link\");\n                link.setAttribute(\"href\", rowData.homepage);\n                link.setAttribute(\"title\", rowData.homepage);\n                link.textContent = url.hostname;\n                return link;\n            } catch  {\n                return \"\";\n            }\n        }\n    }\n];\nfunction $15a6648033506b14$export$5570d3b32630dd60(options) {\n    if (options.isVisibleButtons) {\n        const buttonsColumn = {\n            title: \"\",\n            key: null,\n            render: ()=>{\n                const wrapper = document.createElement(\"div\");\n                wrapper.append($15a6648033506b14$var$buttons.update(), $15a6648033506b14$var$buttons.remove());\n                return wrapper;\n            }\n        };\n        return $15a6648033506b14$var$columns.concat(buttonsColumn);\n    }\n    return $15a6648033506b14$var$columns;\n}\n\n\nfunction $6a7367dc13476512$export$f631b2056a0c0baf(message) {\n    const root = document.createElement(\"div\");\n    const span = document.createElement(\"span\");\n    const text = document.createTextNode(message);\n    const closeIconTemplate = document.getElementById(\"icon-close-circle-template\");\n    const closeIcon = closeIconTemplate.content.cloneNode(true);\n    root.classList.add(\"alert-message\");\n    span.classList.add(\"icon\");\n    span.append(closeIcon);\n    root.append(span, text);\n    return root;\n}\n\n\nfunction $a0490d3407ddb5bc$export$798e69447a57ffe5(columns) {\n    const header = document.createElement(\"thead\");\n    const headerRow = document.createElement(\"tr\");\n    for (const column of columns){\n        const headerCell = document.createElement(\"th\");\n        headerCell.textContent = column.title;\n        headerRow.append(headerCell);\n    }\n    header.append(headerRow);\n    return header;\n}\n\n\nfunction $0277c8696dbc9399$export$3cb21b6b1233300e(column, rowData) {\n    const cell = document.createElement(\"td\");\n    cell.setAttribute(\"data-label\", column.title);\n    if (column.className) cell.classList.add(column.className);\n    if (column.render) {\n        const cellValue = column.render(rowData);\n        cell.append(cellValue);\n    } else if (column.key) {\n        const value = rowData[column.key];\n        cell.textContent = value;\n    } else cell.textContent = \"\";\n    return cell;\n}\n\n\nfunction $3143c53e11073824$var$createRow(columns, rowData) {\n    const row = document.createElement(\"tr\");\n    for (const column of columns)row.append((0, $0277c8696dbc9399$export$3cb21b6b1233300e)(column, rowData));\n    return row;\n}\nfunction $3143c53e11073824$var$createErrorRow(columns, rowData) {\n    const row = document.createElement(\"tr\");\n    const nameCell = document.createElement(\"td\");\n    const damageCell = document.createElement(\"td\");\n    [\n        nameCell,\n        damageCell\n    ].forEach((cell)=>cell.classList.add(\"damage\"));\n    damageCell.setAttribute(\"colspan\", `${columns.length - 1}`);\n    nameCell.textContent = rowData.name;\n    damageCell.textContent = rowData.error.message;\n    row.append(nameCell, damageCell);\n    return row;\n}\nfunction $3143c53e11073824$export$d7ac61300192caab(columns, payload) {\n    const body = document.createElement(\"tbody\");\n    for (const rowData of payload){\n        const isDamagePayload = \"damage\" in rowData;\n        if (isDamagePayload) {\n            const damageColumns = columns;\n            const errorRow = $3143c53e11073824$var$createErrorRow(damageColumns, rowData);\n            body.append(errorRow);\n        } else {\n            const row = $3143c53e11073824$var$createRow(columns, rowData);\n            body.append(row);\n        }\n    }\n    return body;\n}\n\n\nfunction $55245f749b95de58$var$createTableWrapper() {\n    const wrapper = document.createElement(\"div\");\n    wrapper.classList.add(\"table-wrapper\");\n    return wrapper;\n}\nfunction $55245f749b95de58$var$createTableTitle(text) {\n    const title = document.createElement(\"h2\");\n    title.textContent = text;\n    return title;\n}\nfunction $55245f749b95de58$var$createTableContainer(text) {\n    const container = document.createElement(\"section\");\n    const title = $55245f749b95de58$var$createTableTitle(text);\n    container.classList.add(\"table-section\");\n    container.append(title);\n    return container;\n}\nfunction $55245f749b95de58$export$4e1d9a3b5c360fd3({ title: title, columns: columns, dataTable: dataTable }) {\n    const container = $55245f749b95de58$var$createTableContainer(title);\n    const wrapper = $55245f749b95de58$var$createTableWrapper();\n    const table = document.createElement(\"table\");\n    const header = (0, $a0490d3407ddb5bc$export$798e69447a57ffe5)(columns);\n    const rows = (0, $3143c53e11073824$export$d7ac61300192caab)(columns, dataTable);\n    table.append(header, rows);\n    wrapper.append(table);\n    container.append(wrapper);\n    return container;\n}\n\n\n\n\n/*\n    https://uit.stanford.edu/accessibility/concepts/tables/css-aria\n    https://adrianroselli.com/2017/11/a-responsive-accessible-table.html\n\n    https://habr.com/ru/articles/546980/\n    https://learn.javascript.ru/webcomponents-intro\n*/ /*\n    # Mock for test\n    const data: Array<Package> = [\n        {\n            name: 'axios',\n            diff: 'major',\n            range: '^1.2.0',\n            version: '1.2.4',\n            lastVersion: '3.0.1',\n            homepage: 'https://www.google.com',\n        },\n    ];\n\n    const columns = createColumns({ isVisibleButtons: false });\n    root.append(generateTable(columns, data));\n*/ const $8b92a9e94badc9da$var$root = document.getElementById(\"root\");\nfunction $8b92a9e94badc9da$var$hideSpinElement() {\n    const spin = document.getElementById(\"spin\");\n    if (spin) spin.remove();\n}\nwindow.addEventListener(\"message\", (event)=>{\n    const { type: type, payload: payload } = event.data;\n    switch(type){\n        case \"INITIALIZATION\":\n            console.log(\"INITIALIZATION\");\n            break;\n        case \"DEPENDENCIES\":\n            {\n                const { title: title, packages: packages } = payload;\n                const columns = (0, $15a6648033506b14$export$5570d3b32630dd60)({\n                    isVisibleButtons: false\n                });\n                $8b92a9e94badc9da$var$hideSpinElement();\n                $8b92a9e94badc9da$var$root.append((0, $55245f749b95de58$export$4e1d9a3b5c360fd3)({\n                    title: title,\n                    columns: columns,\n                    dataTable: packages\n                }));\n                break;\n            }\n        case \"DEV_DEPENDENCIES\":\n            {\n                const { title: title, packages: packages } = payload;\n                const columns = (0, $15a6648033506b14$export$5570d3b32630dd60)({\n                    isVisibleButtons: false\n                });\n                $8b92a9e94badc9da$var$hideSpinElement();\n                $8b92a9e94badc9da$var$root.append((0, $55245f749b95de58$export$4e1d9a3b5c360fd3)({\n                    title: title,\n                    columns: columns,\n                    dataTable: packages\n                }));\n                break;\n            }\n        case \"ERROR_DETECTED\":\n            {\n                const errorMessage = (0, $6a7367dc13476512$export$f631b2056a0c0baf)(payload);\n                $8b92a9e94badc9da$var$root.append(errorMessage);\n                break;\n            }\n        case \"PACKAGE_MANAGER_DETECTED\":\n            console.log(\"PACKAGE_MANAGER_DETECTED\");\n            break;\n    }\n});\n\n})();\n//# sourceMappingURL=main.js.map\n","import './scripts/components';\n\nimport { createColumns } from './scripts/columns';\nimport { createAlert } from './scripts/alert';\nimport { generateTable } from './scripts/table';\n\n/*\n    https://uit.stanford.edu/accessibility/concepts/tables/css-aria\n    https://adrianroselli.com/2017/11/a-responsive-accessible-table.html\n\n    https://habr.com/ru/articles/546980/\n    https://learn.javascript.ru/webcomponents-intro\n*/\n\n/*\n    # Mock for test\n    const data: Array<Package> = [\n        {\n            name: 'axios',\n            diff: 'major',\n            range: '^1.2.0',\n            version: '1.2.4',\n            lastVersion: '3.0.1',\n            homepage: 'https://www.google.com',\n        },\n    ];\n\n    const columns = createColumns({ isVisibleButtons: false });\n    root.append(generateTable(columns, data));\n*/\n\nconst root = document.getElementById('root') as HTMLDivElement;\n\nfunction hideSpinElement() {\n    const spin = document.getElementById('spin');\n\n    if (spin) spin.remove();\n}\n\nwindow.addEventListener('message', (event) => {\n    const { type, payload } = event.data;\n\n    switch (type) {\n        case 'INITIALIZATION': {\n            console.log('INITIALIZATION');\n            break;\n        }\n        case 'DEPENDENCIES': {\n            const { title, packages } = payload;\n\n            const columns = createColumns({ isVisibleButtons: false });\n\n            hideSpinElement();\n            root.append(generateTable({ title, columns, dataTable: packages }));\n            break;\n        }\n        case 'DEV_DEPENDENCIES': {\n            const { title, packages } = payload;\n\n            const columns = createColumns({ isVisibleButtons: false });\n\n            hideSpinElement();\n            root.append(generateTable({ title, columns, dataTable: packages }));\n            break;\n        }\n        case 'ERROR_DETECTED': {\n            const errorMessage = createAlert(payload);\n            root.append(errorMessage);\n            break;\n        }\n        case 'PACKAGE_MANAGER_DETECTED': {\n            console.log('PACKAGE_MANAGER_DETECTED');\n            break;\n        }\n    }\n});\n","class Spinner extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('spinner-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\nclass Icon extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('icon-wrapper-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\nclass Badge extends HTMLElement {\n    connectedCallback() {\n        const shadow = this.attachShadow({ mode: 'open' });\n        const template = document.getElementById('badge-template') as HTMLTemplateElement;\n\n        shadow.append(template.content.cloneNode(true));\n    }\n}\n\ncustomElements.define('sy-spinner', Spinner);\ncustomElements.define('sy-icon', Icon);\ncustomElements.define('sy-badge', Badge);\n","import { BaseColumn, Column } from './types';\nimport { createButtons } from './buttons';\n\ninterface ColumnOptions {\n    isVisibleButtons: boolean;\n}\n\nconst buttons = createButtons();\n\n/*\n    TODO: move\n*/\nfunction selectDifferenceColor(diff: PackageModel['diff']) {\n    if (diff == null) return 'gray';\n    if (diff.startsWith('pre')) return 'blue';\n\n    switch (diff) {\n        case 'major':\n            return 'red';\n        case 'minor':\n            return 'orange';\n        case 'patch':\n            return 'green';\n        default:\n            return 'gray';\n    }\n}\n\nconst columns: Array<Column> = [\n    /**\n     * Package name (dependency name from package.json)\n     */\n    {\n        title: 'Package',\n        key: 'name',\n        render: (rowData) => {\n            const container = document.createElement('div');\n            container.classList.add('package-name');\n\n            const badge = document.createElement('sy-badge');\n            const span = document.createElement('span');\n\n            badge.setAttribute('color', selectDifferenceColor(rowData.diff));\n            span.textContent = rowData.name;\n\n            container.append(badge, span);\n\n            return container;\n        },\n    },\n    {\n        title: 'Semver diff',\n        key: 'diff',\n        render: (rowData) => {\n            const span = document.createElement('span');\n\n            span.classList.add('semver-diff', `${selectDifferenceColor(rowData.diff)}`);\n            span.textContent = rowData.diff ?? 'identical';\n\n            return span;\n        },\n    },\n    {\n        title: 'Range',\n        key: 'range',\n    },\n    {\n        title: 'Current Version',\n        key: 'version',\n    },\n    {\n        title: 'Latest Version',\n        key: 'latestVersion',\n    },\n    /**\n     * Link to the package's home page\n     */\n    {\n        title: 'Homepage',\n        key: 'homepage',\n        render: (rowData) => {\n            try {\n                const url = new URL(rowData.homepage);\n                const link = document.createElement('a');\n\n                link.classList.add('link');\n                link.setAttribute('href', rowData.homepage);\n                link.setAttribute('title', rowData.homepage);\n\n                link.textContent = url.hostname;\n\n                return link;\n            } catch {\n                return '';\n            }\n        },\n    },\n];\n\nexport function createColumns(options: ColumnOptions) {\n    if (options.isVisibleButtons) {\n        const buttonsColumn: Column = {\n            title: '',\n            key: null,\n            render: () => {\n                const wrapper = document.createElement('div');\n                wrapper.append(buttons.update(), buttons.remove());\n\n                return wrapper;\n            },\n        };\n\n        return columns.concat(buttonsColumn);\n    }\n\n    return columns;\n}\n","type ButtonType = 'primary' | 'danger';\n\nfunction createButton(type: ButtonType, icon: Node) {\n    const button = document.createElement('button');\n    const iconWrapper = document.createElement('sy-icon');\n\n    button.classList.add('button-icon', type);\n\n    iconWrapper.append(icon);\n    button.append(iconWrapper);\n\n    return button;\n}\n\nexport function createButtons() {\n    const updateIconTemplate = document.getElementById('icon-update-template') as HTMLTemplateElement;\n    const basketIconTemplate = document.getElementById('icon-basket-template') as HTMLTemplateElement;\n\n    return {\n        update: () => {\n            const icon = updateIconTemplate.content.cloneNode(true);\n            return createButton('primary', icon);\n        },\n        remove: () => {\n            const icon = basketIconTemplate.content.cloneNode(true);\n            return createButton('danger', icon);\n        },\n    };\n}\n","export function createAlert(message: string) {\n    const root = document.createElement('div');\n    const span = document.createElement('span');\n    const text = document.createTextNode(message);\n\n    const closeIconTemplate = document.getElementById('icon-close-circle-template') as HTMLTemplateElement;\n    const closeIcon = closeIconTemplate.content.cloneNode(true);\n\n    root.classList.add('alert-message');\n    span.classList.add('icon');\n\n    span.append(closeIcon);\n    root.append(span, text);\n\n    return root;\n}\n","export { generateTable } from './table';\n","import { createHeader } from './header';\nimport { createRows } from './row';\nimport { Column, DamageColumn, type BaseColumn, type PackageType } from '../types';\n\nfunction createTableWrapper() {\n    const wrapper = document.createElement('div');\n    wrapper.classList.add('table-wrapper');\n\n    return wrapper;\n}\n\nfunction createTableTitle(text: string) {\n    const title = document.createElement('h2');\n    title.textContent = text;\n\n    return title;\n}\n\nfunction createTableContainer(text: string) {\n    const container = document.createElement('section');\n    const title = createTableTitle(text);\n\n    container.classList.add('table-section');\n    container.append(title);\n\n    return container;\n}\n\ninterface CreationTableProps {\n    title: string;\n    columns: Array<Column | DamageColumn>;\n    dataTable: Array<PackageType>;\n}\n\nexport function generateTable({ title, columns, dataTable }: CreationTableProps) {\n    const container = createTableContainer(title);\n    const wrapper = createTableWrapper();\n\n    const table = document.createElement('table');\n\n    const header = createHeader(columns);\n    const rows = createRows(columns, dataTable);\n\n    table.append(header, rows);\n    wrapper.append(table);\n    container.append(wrapper);\n\n    return container;\n}\n","import { type Column, type DamageColumn } from '../types';\n\nexport function createHeader(columns: Array<Column | DamageColumn>) {\n    const header = document.createElement('thead');\n    const headerRow = document.createElement('tr');\n\n    for (const column of columns) {\n        const headerCell = document.createElement('th');\n        headerCell.textContent = column.title;\n\n        headerRow.append(headerCell);\n    }\n\n    header.append(headerRow);\n    return header;\n}\n","import { createCell } from './cell';\nimport { type Column, type DamageColumn, type PackageType } from '../types';\n\nfunction createRow(columns: Array<Column>, rowData: PackageModel) {\n    const row = document.createElement('tr');\n\n    for (const column of columns) {\n        row.append(createCell(column, rowData));\n    }\n\n    return row;\n}\n\nfunction createErrorRow(columns: Array<DamageColumn>, rowData: DamagePackageModel) {\n    const row = document.createElement('tr');\n\n    const nameCell = document.createElement('td');\n    const damageCell = document.createElement('td');\n\n    [nameCell, damageCell].forEach((cell) => cell.classList.add('damage'));\n\n    damageCell.setAttribute('colspan', `${columns.length - 1}`);\n\n    nameCell.textContent = rowData.name;\n    damageCell.textContent = rowData.error.message;\n\n    row.append(nameCell, damageCell);\n\n    return row;\n}\n\nexport function createRows(columns: Array<Column | DamageColumn>, payload: Array<PackageType>) {\n    const body = document.createElement('tbody');\n\n    for (const rowData of payload) {\n        const isDamagePayload = 'damage' in rowData;\n\n        if (isDamagePayload) {\n            const damageColumns = columns as Array<DamageColumn>;\n            const errorRow = createErrorRow(damageColumns, rowData);\n            body.append(errorRow);\n        } else {\n            const row = createRow(columns as Array<Column>, rowData);\n            body.append(row);\n        }\n    }\n\n    return body;\n}\n","import { type Column } from '../types';\n\nexport function createCell(column: Column, rowData: PackageModel) {\n    const cell = document.createElement('td');\n\n    cell.setAttribute('data-label', column.title);\n\n    if (column.className) {\n        cell.classList.add(column.className);\n    }\n\n    if (column.render) {\n        const cellValue = column.render(rowData);\n        cell.append(cellValue);\n    } else if (column.key) {\n        const value = rowData[column.key];\n        cell.textContent = value;\n    } else {\n        cell.textContent = '';\n    }\n\n    return cell;\n}\n"],"names":["$c5d68ffd5fcc9ca2$var$Spinner","HTMLElement","connectedCallback","shadow","attachShadow","mode","template","document","getElementById","append","content","cloneNode","$c5d68ffd5fcc9ca2$var$Icon","$c5d68ffd5fcc9ca2$var$Badge","$7d054a12c1d6ba04$var$createButton","type","icon","button","createElement","iconWrapper","classList","add","customElements","define","$15a6648033506b14$var$buttons","updateIconTemplate","basketIconTemplate","update","remove","$15a6648033506b14$var$selectDifferenceColor","diff","startsWith","$15a6648033506b14$var$columns","title","key","render","rowData","container","badge","span","setAttribute","textContent","name","url","URL","homepage","link","hostname","$15a6648033506b14$export$5570d3b32630dd60","options","isVisibleButtons","concat","wrapper","$55245f749b95de58$export$4e1d9a3b5c360fd3","columns","dataTable","$55245f749b95de58$var$createTableContainer","text","$55245f749b95de58$var$createTableTitle","$55245f749b95de58$var$createTableWrapper","table","header","headerRow","column","headerCell","rows","payload","body","errorRow","$3143c53e11073824$var$createErrorRow","row","nameCell","damageCell","forEach","cell","length","error","message","$3143c53e11073824$var$createRow","className","cellValue","value","$8b92a9e94badc9da$var$root","$8b92a9e94badc9da$var$hideSpinElement","spin","window","addEventListener","event","data","console","log","packages","errorMessage","root","createTextNode","closeIcon","closeIconTemplate"],"version":3,"file":"main.js.map"}